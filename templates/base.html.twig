<?php
$twig = new Twig_Environment($loader);
$twig->addExtension(new AppExtension());
?>
<!DOCTYPE html>
<html lang="fr">
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- -->
        <meta http-equiv="Content-Type" content="text/html/php/twig"/>
        <meta name="description" content="Projet de groupe titre professionnel"/>
        <meta name="author" content="NSIM / ILLARIONOVA / PASCAL / BIROLINI"/>
        
<link rel="icon" type="image/png" href="{{ asset('build/images/TiroirDuTerroir-ico.png') }}"/>

        <title>{% block title %}Welcome!{% endblock %}</title>
        {# Run `composer require symfony/webpack-encore-bundle`
            and uncomment the following Encore helpers to start using Symfony UX #}
        {% block stylesheets %}
            {{ encore_entry_link_tags('app') }}
        {% endblock %}

    </head>
    
    <body>
        
        <header>
            <div class="d-flex flex-row w-100 bg-light justify-content-between">
                <div id="LogoContainer bg-light">
                    <a class="Logo" href="{{ path('homepage') }}">
                        <img id="ImgLogo" src="{{ asset('build/images/TiroirDuTerroir-logo.png') }}" alt="Logo Tiroir du Terroir">
                    </a>
                </div>
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <!-- -->
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <!-- -->
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-0">
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Nos produits...
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <span style="padding:0 0 0 10px;" disabled>Par catégorie :</span>
                                    <div class="dropdown-divider"></div>
                                    {% for category in categories() %}
                                    <a class="dropdown-item" href="{{ path('article_catalog', {'id': category.id}) }}">{{ category.label }}</a>
                                    <!-- <a class="dropdown-item" href="{{ path('category_show', {'id': category.id}) }}">{{ category.label }}</a> -->
                                    {% endfor %}
                                </div>
                            </li>
                        </ul>
                        {# Si l'utilisateur EST DEJA identifié #}
                        {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                        <!-- {#{% if app.user %}#} -->
                        <ul class="navbar-nav ml-0">
                            <li class="nav-item">
                                <a class="nav-link" href="#"><i class="ri-profile-line"></i>  {{ app.user.firstname }} {{ app.user.lastname }}</a>
                                <!-- <a class="nav-link" href="{#{{ path('profile') }}#}">{#{{ app.user.firstname }} {{ app.user.lastname }}#}</a> -->
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#"><i class="ri-shopping-cart-line"></i>  Panier</a>
                                <!-- <a class="nav-link" href="{#{{ path('profile') }}#}">{#{{ app.user.firstname }} {{ app.user.lastname }}#}</a> -->
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{{ path('app_logout') }}"><i class="ri-logout-circle-r-line"></i>  Déconnexion</a>
                                <!-- <a class="nav-link" href="{#{{ path('app_logout') }}#}">Déconnexion</a> -->
                            </li>
                            {% if is_granted("ROLE_ADMIN") %}
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="ri-admin-line"></i>   Administration
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item" href="{{ path('category_index') }}">Catégories</a>
                                    <a class="dropdown-item" href="{{ path('article_index') }}">Articles</a>
                                </div>
                            </li>
                            {% endif %}
                        </ul>
                        {# Si l'utilisateur N'est PAS encore identifié #}
                        {% else %}
                        <ul class="navbar-nav ml-0">
                            <li class="nav-item">
                                <a class="nav-link" href="{{ path('app_connection') }}"><i class="ri-login-box-line"></i>   Connexion</a>
                                <!-- <a class="nav-link" href="{#{{ path('app_login') }}#}">Connexion</a> -->
                            </li>
                            <!-- <li>/</li> -->
                            <!-- <li class="nav-item"> -->
                                <!-- <a class="nav-link" href="{#{{ path('app_register') }}#}"><i class="ri-user-add-line"></i>  Inscription</a> -->
                                <!-- <a class="nav-link" href="{#{{ path('app_register') }}#}">Inscription</a> -->
                            <!-- </li> -->
                            <!-- <li class="nav-item"> -->
                                <!-- <a class="nav-link" href="{#{{ path('app_login') }}#}"><i class="ri-login-circle-line"></i>  Log In</a> -->
                                <!-- <a class="nav-link" href="{#{{ path('app_login') }}#}">Connexion</a> -->
                            <!-- </li> -->
                        </ul>
                        {% endif %}
                    </div>
                </nav>
                <!-- Boutons de changement de langue -->
                <!-- <div class="d-flex flex-row" id="DivLang">
                    <div class="d-flex flex-row DivLang DivLangEn">
                        <div class="DivImgFlag ImgFlagEn"></div>
                        <p>En</p>
                    </div>
                    <div class="d-flex flex-row DivLang DivLangFr">
                        <div class="DivImgFlag ImgFlagFr"></div>
                        <p>Fr</p>
                    </div>
                </div> -->
            </div>
        </header>


        {% block body %}



        {% endblock %}
        

        {% block javascripts %}
            {{ encore_entry_script_tags('app') }}
        {% endblock %}
    </body>
</html>
